---
layout: default
title:  "Virt-Maker"
date:   2016-02-12 17:50:00
categories: projects
---

Virt-Maker
==========

## Automated virtual machine build tool based around libguestfs.


I started virt-maker a while back, mostly to ease the creation of mutliple similar QCOW images for use in an OpenStack environment.
I had used packer to accomplish this goal, as well as wrapping some CI goodness around Foreman.  I really needed a tool that could take
a base qcow that was cloud-ready and just make minor changes to it so it could crank out specialized, prebuilt, ready-to-fly images.
Enter LibGuestFS.  Using libguestfs, specifically the tool `virt-customize` I was able to build a base application image in about
half the time as packer, and then loop through a few singleton steps and make multiple copies of images with all the right config-goodness.
This got me thinking, I could use the QCOW external snapshot functionality to create a forking tree on a per-step basis that would allow
me to create many different base/golden images from publicly available cloud images rapidly.

This is when I started virt-maker (https://github.com/JosiahKerley/virt-maker).  Over the course of about a week I was able to create a prototype
tool that could take in a simple build spec and build host images.